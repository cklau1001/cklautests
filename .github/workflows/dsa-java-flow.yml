name: DSA Java workflow
run-name: ${{ github.actor }}
on:
  push:
   paths:
     - dsa/java/**
env:
  CHECKOUT_PATH: 'dsa/java'
jobs:
  dsa-java-workflow:
    runs-on: ubuntu-latest
    steps:
      - run: echo "DSA Java workflow triggered by ${{ github.event_name }} event."
      - run: echo "Runner=${{ runner.os }}, branch=${{ github.ref }}, repo=${{ github.repository }}"
      - name: Check out code on ${{ env.CHECKOUT_PATH }}
        uses: actions/checkout@v4
        with:
          sparse-checkout: $CHECKOUT_PATH
          sparse-checkout-cone-mode: false
      - run: echo "Code checked out"
      - name: Listing files
        run: |
          ls ${{ github.workspace }}
          echo " "
          ls ${{ github.workspace }}/${{ env.CHECKOUT_PATH }}
      - name: Set up JDK 24
        uses: actions/setup-java@v4
        with:
          java-version: '24'
          distribution: 'oracle'
          cache: maven
      - run: java -version
      - name: Build with Maven
        working-directory: ./$CHECKOUT_PATH
        run: mvn compile

  java-lint:
    uses: ./.github/workflows/linter-java-subflow.yml
    with:
      checkout_path: ${{ env.CHECKOUT_PATH }}
    needs: [dsa-java-workflow]

